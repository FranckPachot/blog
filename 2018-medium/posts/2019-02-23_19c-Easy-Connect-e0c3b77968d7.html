<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>19c Easy Connect</title><style>
      * {
        <!--font-family: Georgia, Cambria, "Times New Roman", Times, serif;-->
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">19c Easy Connect</h1>
</header>
<section data-field="subtitle" class="p-summary">
When TCP/IP was the protocol used mostly everywhere, Oracle introduced EZCONNECT naming method to avoid long connection strings with…
</section>
<section data-field="body" class="e-content">
<section name="fdf6" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="ee1f" id="ee1f" class="graf graf--h3 graf--leading graf--title">19c Easy Connect</h3><p name="23f0" id="23f0" class="graf graf--p graf-after--h3">When TCP/IP was the protocol used mostly everywhere, Oracle introduced EZCONNECT naming method to avoid long connection strings with parentheses everywhere. They said that it was a way to avoid tnsnames.ora but that’s not completely true:</p><ul class="postList"><li name="7b97" id="7b97" class="graf graf--li graf-after--p">you can use full connection strings without a tnsnames.ora</li><li name="054f" id="054f" class="graf graf--li graf-after--li">you still need a tnsnames.ora for more complex connection strings</li></ul><p name="1b34" id="1b34" class="graf graf--p graf-after--li">But the idea was to replace:</p><pre name="632f" id="632f" class="graf graf--pre graf-after--p">(DESCRIPTION=(CONNECT_DATA=(SERVICE_NAME=APP.service.net))(ADDRESS=(PROTOCOL=tcp)(HOST=localhost)(PORT=2483)))</pre><p name="fcbf" id="fcbf" class="graf graf--p graf-after--pre">by:</p><pre name="8839" id="8839" class="graf graf--pre graf-after--p">localhost:2483/APP.service.net</pre><p name="7be9" id="7be9" class="graf graf--p graf-after--pre">and even reduce it to a simple hostname when using the default port and default service name.</p><p name="fc68" id="fc68" class="graf graf--p graf-after--p">I use it a lot when connecting manually, but as soon as there’s a need to add multiple hosts for transparent failover or load balancing, or to add some additional parameters, the full connection string is required.</p><p name="8483" id="8483" class="graf graf--p graf-after--p">In 19c, Oracle has extended the Easy Connect syntax to allow this in EZCONNECT naming and again telling us that it is a way to avoid a tnsnames.ora:</p><figure name="2bdf" id="2bdf" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 84px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 12%;"></div><img class="graf-image" data-image-id="1*sZ3p3buEmRHvw_PK4eRlYQ.png" data-width="1698" data-height="204" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*sZ3p3buEmRHvw_PK4eRlYQ.png"></div><figcaption class="imageCaption"><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/netag/configuring-naming-methods.html#GUID-B0437826-43C1-49EC-A94D-B650B6A4A6EE" data-href="https://docs.oracle.com/en/database/oracle/oracle-database/19/netag/configuring-naming-methods.html#GUID-B0437826-43C1-49EC-A94D-B650B6A4A6EE" class="markup--anchor markup--figure-anchor" rel="nofollow noopener" target="_blank">https://docs.oracle.com/en/database/oracle/oracle-database/19/netag/configuring-naming-methods.html#GUID-B0437826-43C1-49EC-A94D-B650B6A4A6EE</a></figcaption></figure><p name="b039" id="b039" class="graf graf--p graf-after--figure">I still don’t agree. You probably still prefer to deploy a common tnsnames.ora to be sure that all applications connect with the correct string, or use an LDAP directory. However, they are not wrong... I am. I use EZCONNECT as a syntactic sugar. But for Oracle it a naming method as defined in NAMES.DIRECTORY_PATH.</p><p name="bec4" id="bec4" class="graf graf--p graf-after--p">However, if you have a centralized way to store the JDBC URL, then EZCONNECT will avoid any local configuration in 19c as mentioned in the documentation. Let’s see what is possible.</p><p name="31cf" id="31cf" class="graf graf--p graf-after--p">I’m using tnsping to resolve the EZCONNECT string to a full description one, which I ident for better readability.</p><p name="6289" id="6289" class="graf graf--p graf-after--p">This is the most simple, and not new, using the default port 1521:</p><pre name="721a" id="721a" class="graf graf--pre graf-after--p">tnsping <strong class="markup--strong markup--pre-strong">//geneva/PDB1</strong></pre><pre name="bd37" id="bd37" class="graf graf--pre graf-after--pre">(DESCRIPTION=<br>    (CONNECT_DATA=<br>      (SERVICE_NAME=<strong class="markup--strong markup--pre-strong">PDB1</strong>)<br>    )<br>    (ADDRESS=<br>      (PROTOCOL=tcp)<br>      (HOST=<strong class="markup--strong markup--pre-strong">geneva</strong>)<br>      (PORT=1521)<br>    )<br>  )</pre><p name="312b" id="312b" class="graf graf--p graf-after--pre">And the most complex before 19c is mentioning the server type (dedicated, shared or DRCP) and the instance name</p><pre name="15b8" id="15b8" class="graf graf--pre graf-after--p">tnsping <strong class="markup--strong markup--pre-strong">//geneva:1521/PDB1:pooled/CDB1</strong></pre><pre name="cef1" id="cef1" class="graf graf--pre graf-after--pre">(DESCRIPTION=<br>    (CONNECT_DATA=<br>      (SERVICE_NAME=<strong class="markup--strong markup--pre-strong">PDB1</strong>)<br>      (INSTANCE_NAME=<strong class="markup--strong markup--pre-strong">CDB1</strong>)<br>      (SERVER=<strong class="markup--strong markup--pre-strong">pooled</strong>)<br>    )<br>    (ADDRESS=<br>      (PROTOCOL=tcp)<br>      (HOST=<strong class="markup--strong markup--pre-strong">geneva</strong>)<br>      (PORT=<strong class="markup--strong markup--pre-strong">1521</strong>)<br>    )<br>  )</pre><p name="51bc" id="51bc" class="graf graf--p graf-after--pre">Now in 19c we can mention multiple hosts which will be converted to a Load Balancing address list</p><pre name="be68" id="be68" class="graf graf--pre graf-after--p">tnsping <strong class="markup--strong markup--pre-strong">//geneva,lausanne/PDB1</strong></pre><pre name="83a6" id="83a6" class="graf graf--pre graf-after--pre">(DESCRIPTION=<br>    (CONNECT_DATA=<br>      (SERVICE_NAME=<strong class="markup--strong markup--pre-strong">PDB1</strong>)<br>    )<br>    (<strong class="markup--strong markup--pre-strong">LOAD_BALANCE=on</strong>)<br>    (ADDRESS=<br>      (PROTOCOL=tcp)<br>      (HOST=<strong class="markup--strong markup--pre-strong">geneva</strong>)<br>      (PORT=1521)<br>    )<br>    (ADDRESS=<br>      (PROTOCOL=tcp)<br>      (HOST=<strong class="markup--strong markup--pre-strong">lausanne</strong>)<br>      (PORT=1521)<br>    )<br>  )</pre><p name="9a11" id="9a11" class="graf graf--p graf-after--pre">With the same port for:</p><pre name="5eab" id="5eab" class="graf graf--pre graf-after--p">tnsping <strong class="markup--strong markup--pre-strong">//geneva,lausanne:1522/PDB1</strong></pre><pre name="6d05" id="6d05" class="graf graf--pre graf-after--pre">(DESCRIPTION=<br>    (CONNECT_DATA=<br>      (SERVICE_NAME=PDB1)<br>    )<br>    (LOAD_BALANCE=on)<br>    (ADDRESS=<br>      (PROTOCOL=tcp)<br>      (HOST=<strong class="markup--strong markup--pre-strong">geneva</strong>)<br>      (PORT=<strong class="markup--strong markup--pre-strong">1522</strong>)<br>    )<br>    (ADDRESS=<br>      (PROTOCOL=tcp)<br>      (HOST=<strong class="markup--strong markup--pre-strong">lausanne</strong>)<br>      (PORT=<strong class="markup--strong markup--pre-strong">1522</strong>)<br>    )<br>  )</pre><p name="b686" id="b686" class="graf graf--p graf-after--pre">or different port:</p><pre name="69c7" id="69c7" class="graf graf--pre graf-after--p">tnsping <strong class="markup--strong markup--pre-strong">//geneva:1521,lausanne:1522/PDB1</strong></pre><pre name="55a6" id="55a6" class="graf graf--pre graf-after--pre">(DESCRIPTION=<br>    (CONNECT_DATA=<br>      (SERVICE_NAME=PDB1)<br>    )<br>    (LOAD_BALANCE=on)<br>    (ADDRESS=<br>      (PROTOCOL=tcp)<br>      (HOST=<strong class="markup--strong markup--pre-strong">geneva</strong>)<br>      (PORT=<strong class="markup--strong markup--pre-strong">1521</strong>)<br>    )<br>    (ADDRESS=<br>      (PROTOCOL=tcp)<br>      (HOST=<strong class="markup--strong markup--pre-strong">lausanne</strong>)<br>      (PORT=<strong class="markup--strong markup--pre-strong">1522</strong>)<br>    )<br>  )</pre><p name="9379" id="9379" class="graf graf--p graf-after--pre">and even add parameters in URL style (starting with ? and separated by &amp;):</p><pre name="14fd" id="14fd" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">tnsping //geneva:1521,lausanne:1522/PDB1?transport_connect_timeout=5&amp;retry_count=2</strong></pre><pre name="0642" id="0642" class="graf graf--pre graf-after--pre">(DESCRIPTION=<br>    (CONNECT_DATA=<br>      (SERVICE_NAME=PDB1)<br>    )<br>    (<strong class="markup--strong markup--pre-strong">transport_connect_timeout=5</strong>)<br>    (<strong class="markup--strong markup--pre-strong">retry_count=2</strong>)<br>    (LOAD_BALANCE=on)<br>    (ADDRESS=<br>      (PROTOCOL=tcp)<br>      (HOST=geneva)<br>      (PORT=1521)<br>    )<br>    (ADDRESS=<br>      (PROTOCOL=tcp)<br>      (HOST=lausanne)<br>      (PORT=1522)<br>    )<br>  )</pre><p name="bc4a" id="bc4a" class="graf graf--p graf-after--pre">By the way, lowering the default TCP timeout is a good idea most of the times because your network probably answers in less than 60 seconds when available, and you don’t want to wait one minute before trying another address. More about those settings:</p><div name="e8d2" id="e8d2" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://blog.dbi-services.com/transport_connect_timeout-and-retry_count/" data-href="https://blog.dbi-services.com/transport_connect_timeout-and-retry_count/" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://blog.dbi-services.com/transport_connect_timeout-and-retry_count/"><strong class="markup--strong markup--mixtapeEmbed-strong">TRANSPORT_CONNECT_TIMEOUT and RETRY_COUNT - Blog dbi services</strong><br><em class="markup--em markup--mixtapeEmbed-em">By Franck Pachot . When you have a Data Guard configuration, you want the application to connect to the right server…</em>blog.dbi-services.com</a><a href="https://blog.dbi-services.com/transport_connect_timeout-and-retry_count/" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="2778c22931d8bfb44e267a5caef03681" data-thumbnail-img-id="0*7AC7pLU9_i22BRkb" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*7AC7pLU9_i22BRkb);"></a></div><p name="1684" id="1684" class="graf graf--p graf-after--mixtapeEmbed">Note that there are no verifications in the EZCONNECT string. You can mention non-existing parameters:</p><pre name="fc32" id="fc32" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">tnsping //geneva:1521,lausanne:1522/PDB1?make_application_fast=on</strong></pre><pre name="5712" id="5712" class="graf graf--pre graf-after--pre">(DESCRIPTION=<br>    (CONNECT_DATA=<br>      (SERVICE_NAME=PDB1)<br>    )<br>    (make_application_fast=on)<br>    (LOAD_BALANCE=on)<br>    (ADDRESS=<br>      (PROTOCOL=tcp)<br>      (HOST=geneva)<br>      (PORT=1521)<br>    )<br>    (ADDRESS=<br>      (PROTOCOL=tcp)<br>      (HOST=lausanne)<br>      (PORT=1522)<br>    )<br>  )</pre><p name="7e33" id="7e33" class="graf graf--p graf-after--pre">and even try to disable the automatically added Load Balancing which probably results in something you don’t want (both on and off):</p><pre name="976a" id="976a" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">tnsping //geneva:1521,lausanne:1522/PDB1?LOAD_BALANCE=off</strong></pre><pre name="ce4f" id="ce4f" class="graf graf--pre graf-after--pre">(DESCRIPTION=<br>    (CONNECT_DATA=<br>      (SERVICE_NAME=PDB1)<br>    )<br>    (LOAD_BALANCE=<strong class="markup--strong markup--pre-strong">off</strong>)<br>    (LOAD_BALANCE=<strong class="markup--strong markup--pre-strong">on</strong>)<br>    (ADDRESS=<br>      (PROTOCOL=tcp)<br>      (HOST=geneva)<br>      (PORT=1521)<br>    )<br>    (ADDRESS=<br>      (PROTOCOL=tcp)<br>      (HOST=lausanne)<br>      (PORT=1522)<br>    )<br>  )</pre><p name="b72b" id="b72b" class="graf graf--p graf-after--pre">(I opened a SR for this one, will update this post about this)</p><p name="f2bb" id="f2bb" class="graf graf--p graf-after--p">There’s something I like to do when quickly connecting to an unmounted instance (undocumented and even more unrecommended in this way):</p><pre name="bbaa" id="bbaa" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">tnsping //geneva/CDB1)(UR=A</strong></pre><pre name="68df" id="68df" class="graf graf--pre graf-after--pre">(DESCRIPTION=<br>    (CONNECT_DATA=<br>      (SERVICE_NAME=CDB1)<br>      <strong class="markup--strong markup--pre-strong">(UR=A)</strong><br>    )<br>    (ADDRESS=<br>      (PROTOCOL=tcp)<br>      (HOST=geneva)<br>      (PORT=1521)<br>    )<br>  )</pre><p name="02df" id="02df" class="graf graf--p graf-after--pre">So it is still possible here. Do not put the UR=A as a parameter (after ?) because those go with the address list rather than CONNECT_DATA.</p><p name="04b4" id="04b4" class="graf graf--p graf-after--p">Note that SQLCL, the SQL Developer command line accepts all that (tested in 18.4) except when mentioning an instance name in addition to a parameter:</p><figure name="31a3" id="31a3" class="graf graf--figure graf--iframe graf-after--p"><blockquote class="twitter-tweet"><a href="https://twitter.com/FranckPachot/status/1099339920496304130?s=20"></a></blockquote><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></figure><p name="0aee" id="0aee" class="graf graf--p graf-after--figure">But this combination is probably not very useful in most of the cases.</p><p name="19d3" id="19d3" class="graf graf--p graf-after--p graf--trailing">In summary, if you have a centralized way to store the connection strings, then EZCONNECT is a good idea. Because the developers do not like the SQL*Net descriptions with all those parentheses (they are born with XML or JSON or even YAML for the younger ones) and this URL-like syntax will be better accepted by everyone.</p></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@FranckPachot" class="p-author h-card">Franck Pachot</a> on <a href="https://medium.com/p/e0c3b77968d7"><time class="dt-published" datetime="2019-02-23T17:17:06.567Z">February 23, 2019</time></a>.</p><p><a href="https://medium.com/@FranckPachot/19c-easy-connect-e0c3b77968d7" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on July 27, 2019.</p></footer></article></body></html>